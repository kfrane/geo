# Distributed spatial index on top of Redis

Each point has its id and 2D location (longitude, latitude) pair.

Supported operations are:
- Update (point_id, lon, lat) updates the location of the given point
- Rectangle query (lon_min, lon_max, lat_min, lat_max) returns list of points with coordinates in the given longitude and latitude ranges
- Radius query (lon, lat, radius) returns list of points within radius meters of the center point.

Redis Cluster is used as the storage mechanism with the minimum required version of 3.2.

### Geo client installation:
1. https://github.com/redis/hiredis
2. https://github.com/shinberg/cpp-hiredis-cluster
    (clone it in parent dir of this file, no need to install)
3. make

There are three main executables created: update_benchmark, rectangle_benchmark and radius_benchmark. Each of them runs the highest number of queries possible against Redis Cluster. Redis node location is hardcoded to localhost on port 30001. Each of the executables prints a usage method when ran with wrong arguments.

### How to create Redis Cluster?
You can setup the cluster with any number of nodes any way you want, but there is a [script](config/create-cluster) to make the simplest possible cluster. It is made by modifiying an example script that is installed with redis, and can be easily modified to custom needs of the experimental cluster. Note that the script requires Ruby redis to work.


### Test data
[T-drive data set](https://www.microsoft.com/en-us/research/publication/t-drive-trajectory-data-sample/) is the basis for update queries.
Each benchmark needs a test data file which are generated by generate_[circles|rectangles].
